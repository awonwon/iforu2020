<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>開發環境建置 | iforu Project Guide</title>
    <meta name="description" content="system administrator&#39;s memo">
    <meta name="generator" content="VuePress 1.3.1">
    
    
    <link rel="preload" href="/iforu/assets/css/0.styles.adbe3e3d.css" as="style"><link rel="preload" href="/iforu/assets/js/app.24cfdda6.js" as="script"><link rel="preload" href="/iforu/assets/js/2.c8a78117.js" as="script"><link rel="preload" href="/iforu/assets/js/7.fe9ac40b.js" as="script"><link rel="prefetch" href="/iforu/assets/js/10.6b8d26b1.js"><link rel="prefetch" href="/iforu/assets/js/11.a5e423ee.js"><link rel="prefetch" href="/iforu/assets/js/12.56fada03.js"><link rel="prefetch" href="/iforu/assets/js/13.a9bf633e.js"><link rel="prefetch" href="/iforu/assets/js/14.1ad1bb49.js"><link rel="prefetch" href="/iforu/assets/js/15.782c77a6.js"><link rel="prefetch" href="/iforu/assets/js/16.f8b34585.js"><link rel="prefetch" href="/iforu/assets/js/17.e77f5fa4.js"><link rel="prefetch" href="/iforu/assets/js/18.2ba23f43.js"><link rel="prefetch" href="/iforu/assets/js/19.189d65e6.js"><link rel="prefetch" href="/iforu/assets/js/20.306c2105.js"><link rel="prefetch" href="/iforu/assets/js/21.6510756c.js"><link rel="prefetch" href="/iforu/assets/js/22.c31b2590.js"><link rel="prefetch" href="/iforu/assets/js/23.5ffa5d32.js"><link rel="prefetch" href="/iforu/assets/js/24.6db13623.js"><link rel="prefetch" href="/iforu/assets/js/25.a83aa4ef.js"><link rel="prefetch" href="/iforu/assets/js/26.cbee5b93.js"><link rel="prefetch" href="/iforu/assets/js/27.8d16dc9b.js"><link rel="prefetch" href="/iforu/assets/js/28.21f3e228.js"><link rel="prefetch" href="/iforu/assets/js/29.8276d66d.js"><link rel="prefetch" href="/iforu/assets/js/3.45aaba56.js"><link rel="prefetch" href="/iforu/assets/js/30.4f90e09d.js"><link rel="prefetch" href="/iforu/assets/js/31.ea20c7a6.js"><link rel="prefetch" href="/iforu/assets/js/32.1112c568.js"><link rel="prefetch" href="/iforu/assets/js/33.b6e27c2f.js"><link rel="prefetch" href="/iforu/assets/js/34.fa0692e7.js"><link rel="prefetch" href="/iforu/assets/js/35.a340c0a4.js"><link rel="prefetch" href="/iforu/assets/js/36.32edf14c.js"><link rel="prefetch" href="/iforu/assets/js/37.dba0dbfa.js"><link rel="prefetch" href="/iforu/assets/js/38.780a20cb.js"><link rel="prefetch" href="/iforu/assets/js/39.adc8e0e4.js"><link rel="prefetch" href="/iforu/assets/js/4.df91fca7.js"><link rel="prefetch" href="/iforu/assets/js/40.7d880953.js"><link rel="prefetch" href="/iforu/assets/js/41.6f8ab3c9.js"><link rel="prefetch" href="/iforu/assets/js/5.0f115d5f.js"><link rel="prefetch" href="/iforu/assets/js/6.f5b070e2.js"><link rel="prefetch" href="/iforu/assets/js/8.18a3960b.js"><link rel="prefetch" href="/iforu/assets/js/9.ebed5abe.js">
    <link rel="stylesheet" href="/iforu/assets/css/0.styles.adbe3e3d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/iforu/" class="home-link router-link-active"><!----> <span class="site-name">iforu Project Guide</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/iforu/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/iforu/server/" class="nav-link">
  Server
</a></div><div class="nav-item"><a href="/iforu/hicloud/" class="nav-link">
  Hicloud
</a></div><div class="nav-item"><a href="/iforu/third-party/" class="nav-link">
  Third Party
</a></div><div class="nav-item"><a href="/iforu/security/burpsuite/" class="nav-link">
  Security
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/iforu/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/iforu/server/" class="nav-link">
  Server
</a></div><div class="nav-item"><a href="/iforu/hicloud/" class="nav-link">
  Hicloud
</a></div><div class="nav-item"><a href="/iforu/third-party/" class="nav-link">
  Third Party
</a></div><div class="nav-item"><a href="/iforu/security/burpsuite/" class="nav-link">
  Security
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/iforu/" class="sidebar-link">員購網系統專案維運文件</a></li><li><a href="/iforu/dev/office/" class="sidebar-link">辦公室相關</a></li><li><a href="/iforu/dev/" class="active sidebar-link">開發環境建置</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/iforu/dev/#git-server" class="sidebar-link">Git Server</a></li><li class="sidebar-sub-header"><a href="/iforu/dev/#專案建置" class="sidebar-link">專案建置</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/iforu/dev/#get-project" class="sidebar-link">Get Project</a></li><li class="sidebar-sub-header"><a href="/iforu/dev/#eclipse" class="sidebar-link">Eclipse</a></li><li class="sidebar-sub-header"><a href="/iforu/dev/#eclipse-tomcat" class="sidebar-link">Eclipse Tomcat</a></li><li class="sidebar-sub-header"><a href="/iforu/dev/#postgresql" class="sidebar-link">PostgreSQL</a></li><li class="sidebar-sub-header"><a href="/iforu/dev/#solr" class="sidebar-link">Solr</a></li></ul></li><li class="sidebar-sub-header"><a href="/iforu/dev/#memo" class="sidebar-link">Memo</a></li></ul></li><li><a href="/iforu/dev/higate.html" class="sidebar-link">Higate</a></li><li><a href="/iforu/dev/infra.html" class="sidebar-link">INFRA</a></li><li><a href="/iforu/dev/deploy.html" class="sidebar-link">Deploy</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="開發環境建置"><a href="#開發環境建置" class="header-anchor">#</a> 開發環境建置</h1> <h2 id="git-server"><a href="#git-server" class="header-anchor">#</a> Git Server</h2> <p><code>https://10.172.30.212/</code>
以 LDAP 帳號登入。</p> <h2 id="專案建置"><a href="#專案建置" class="header-anchor">#</a> 專案建置</h2> <p>環境需求：</p> <ul><li>Git</li> <li>JDK 1.8</li> <li>Eclipse</li> <li>Tomcat portable v8.5</li> <li>PostgreSQL v9.6</li> <li>solr v7.6</li></ul> <h3 id="get-project"><a href="#get-project" class="header-anchor">#</a> Get Project</h3> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">mkdir</span> ./project
<span class="token builtin class-name">cd</span> ./project/
<span class="token function">git</span> clone https://10.172.30.212/?? nextec
</code></pre></div><h3 id="eclipse"><a href="#eclipse" class="header-anchor">#</a> Eclipse</h3> <p>開啟 eclipse 並匯入 maven 的現有專案：指向剛剛 clone 下來的 nextec 目錄 ( pom.xml 所在目錄)</p> <p><img src="/iforu/assets/img/dev-env-01.798750ae.png" alt="dev-env-01" title="dev-env-01"></p> <p><img src="/iforu/assets/img/dev-env-02.36cde102.png" alt="dev-env-02" title="dev-env-02"></p> <p>在 eclipse 的 nextec 專案中，開啟專案的屬性頁面：</p> <p><img src="/iforu/assets/img/dev-env-03.b2708e8f.png" alt="dev-env-03" title="dev-env-03"></p> <p>設定 <code>Project Facets</code> 中 <code>Java</code> 的版本為 1.8、並選取 <code>Dynamic Web Module</code>。
(若執行 Maven update，Java 可能會被改回舊版，要注意!)</p> <p><img src="/iforu/assets/img/dev-env-04.9f6d9150.png" alt="dev-env-04" title="dev-env-04"></p> <p>設定 <strong>Deployment Assembly page</strong> 如下圖：</p> <p><img src="/iforu/assets/img/dev-env-05.6cbd0911.png" alt="dev-env-05" title="dev-env-05"></p> <p>設定 <strong>Java Build Path/Libraries</strong> 加入 {/path/to/nextec/project}/lib 中的 jar 檔：</p> <p><img src="/iforu/assets/img/dev-env-06.6b48603d.png" alt="dev-env-06" title="dev-env-06"></p> <p>在 <strong>Java Build Path/Order and Export</strong> 中，移動 <code>JRE</code> 到最頂端。</p> <p><img src="/iforu/assets/img/dev-env-07.2252b55b.png" alt="dev-env-07" title="dev-env-07"></p> <h3 id="eclipse-tomcat"><a href="#eclipse-tomcat" class="header-anchor">#</a> Eclipse Tomcat</h3> <p>在 eclipse 中加入 tomcat Server</p> <p><img src="/iforu/assets/img/dev-env-08.96370891.png" alt="dev-env-08" title="dev-env-08"></p> <p>(如果是初次設定，畫面應該會有些許不同)
<img src="/iforu/assets/img/dev-env-09.25b13d70.png" alt="dev-env-09" title="dev-env-09"></p> <p>隨後設定 Tomcat 所在目錄即可 (解壓後的目錄)。</p> <h3 id="postgresql"><a href="#postgresql" class="header-anchor">#</a> PostgreSQL</h3> <p>預設的測試環境帳密如下：
(如果安裝時欲設定不同的帳密，記得修改測試環境的 common.properties 檔案中相關設定，並在後續內容中自動替換。)</p> <ul><li>Account: postgres</li> <li>Password: postgres</li></ul> <p>建立專案資料庫 <code>nextec</code> 並匯入資料庫備份檔：</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token builtin class-name">cd</span> C:<span class="token punctuation">\</span>Program Files<span class="token punctuation">\</span>PostgreSQL<span class="token punctuation">\</span><span class="token number">9.6</span><span class="token punctuation">\</span>bin

<span class="token comment"># 如果無法登入，請檢查 `C:\Program Files\PostgreSQL\9.6\data\pg_hba.conf` 設定。</span>
psql.exe -Upostgres -h localhost
</code></pre></div><div class="language-sql extra-class"><pre class="language-sql"><code>postgres<span class="token operator">=</span><span class="token comment"># create database nextec;</span>
\q
</code></pre></div><div class="language-sh extra-class"><pre class="language-sh"><code>pg_restore.exe -h localhost -Upostgres -d nextec -v /path/to/db_backup_file
</code></pre></div><p>若是線上資料庫的備份檔，還需要去除個資資料。
所以再次登入 db console：</p> <div class="language-sh extra-class"><pre class="language-sh"><code>psql.exe -Upostgres -h localhost nextec
</code></pre></div><p>登入後貼上下列去個資語法：</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">UPDATE</span> product_order <span class="token keyword">SET</span> ship_name <span class="token operator">=</span> <span class="token string">'na'</span> <span class="token punctuation">,</span> ship_addr <span class="token operator">=</span> <span class="token string">'na'</span> <span class="token punctuation">,</span> ship_phone_number_house <span class="token operator">=</span> <span class="token string">'na'</span><span class="token punctuation">,</span> ship_phone_number_mobile <span class="token operator">=</span> <span class="token string">'na'</span><span class="token punctuation">,</span> member_email <span class="token operator">=</span> <span class="token string">'tlz_vic@cht.com.tw'</span><span class="token punctuation">;</span> 
<span class="token keyword">UPDATE</span> member <span class="token keyword">SET</span> name <span class="token operator">=</span> <span class="token string">'NA'</span><span class="token punctuation">,</span> email <span class="token operator">=</span> <span class="token string">'tlz_vic@cht.com.tw'</span><span class="token punctuation">;</span> 
<span class="token keyword">UPDATE</span> address_template <span class="token keyword">SET</span> address <span class="token operator">=</span> <span class="token string">'NA'</span> <span class="token punctuation">,</span> name <span class="token operator">=</span> <span class="token string">'NA'</span> <span class="token punctuation">,</span> phone_number <span class="token operator">=</span> <span class="token string">'NA'</span><span class="token punctuation">,</span>addrother <span class="token operator">=</span> <span class="token string">'NA'</span><span class="token punctuation">;</span> 
<span class="token keyword">UPDATE</span> supplier_info <span class="token keyword">SET</span> email <span class="token operator">=</span> <span class="token string">'tlz_vic@cht.com.tw'</span><span class="token punctuation">,</span> bill_email <span class="token operator">=</span> <span class="token string">'tlz_vic@cht.com.tw'</span><span class="token punctuation">;</span>
<span class="token keyword">UPDATE</span> operator <span class="token keyword">SET</span> email <span class="token operator">=</span> <span class="token string">'tlz_vic@cht.com.tw'</span><span class="token punctuation">;</span>
<span class="token keyword">UPDATE</span> receive_address <span class="token keyword">set</span> address <span class="token operator">=</span> <span class="token string">'NA'</span><span class="token punctuation">;</span>
<span class="token keyword">UPDATE</span> hamimall_member <span class="token keyword">SET</span> name <span class="token operator">=</span> <span class="token string">'NA'</span><span class="token punctuation">,</span>nickname <span class="token operator">=</span> <span class="token string">'NA'</span><span class="token punctuation">,</span> email <span class="token operator">=</span> <span class="token string">'tlz_vic@cht.com.tw'</span><span class="token punctuation">,</span> edm_email <span class="token operator">=</span> <span class="token string">'tlz_vic@cht.com.tw'</span><span class="token punctuation">,</span> mobile <span class="token operator">=</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> login_ip <span class="token operator">=</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span>
<span class="token keyword">UPDATE</span> hamimall_receive_address <span class="token keyword">SET</span> name <span class="token operator">=</span> <span class="token string">'NA'</span><span class="token punctuation">,</span> mobile_phone_number <span class="token operator">=</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> landline_phone_number <span class="token operator">=</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> address <span class="token operator">=</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> addrother <span class="token operator">=</span> <span class="token string">'測試地址'</span><span class="token punctuation">;</span>
<span class="token keyword">UPDATE</span> hamimall_product_order <span class="token keyword">SET</span> member_email <span class="token operator">=</span> <span class="token string">'tlz_vic@cht.com.tw'</span><span class="token punctuation">,</span> member_name <span class="token operator">=</span> <span class="token string">'NA'</span><span class="token punctuation">,</span> ship_name <span class="token operator">=</span> <span class="token string">'NA'</span><span class="token punctuation">,</span> ship_mobile_phone_number <span class="token operator">=</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> ship_landline_phone_number <span class="token operator">=</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>ship_addr <span class="token operator">=</span> <span class="token string">'測試地址'</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="solr"><a href="#solr" class="header-anchor">#</a> Solr</h3> <p>待續...</p> <h2 id="memo"><a href="#memo" class="header-anchor">#</a> Memo</h2> <ul><li><p>eclipse 如果出現 nextec 設定檔無法更新，或 Deployment Assembly page 無法顯示</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">rm</span> -rf nextec/.settings nextec/.project
</code></pre></div><p>然後重新匯入 nextec</p></li> <li><p>eclipse maven 連線錯誤</p> <p>手動設定 maven proxy <code>%USERPROFILE%\.m2\settings.xml</code></p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>settings</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/SETTINGS/1.0.0<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/SETTINGS/1.0.0
                      https://maven.apache.org/xsd/settings-1.0.0.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>proxies</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>proxy</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>myproxy<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>active</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>active</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>protocol</span><span class="token punctuation">&gt;</span></span>http<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>protocol</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>host</span><span class="token punctuation">&gt;</span></span>proxy.cht.com.tw<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>host</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>port</span><span class="token punctuation">&gt;</span></span>8080<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>port</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>proxy</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>proxies</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>settings</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li><p>eclipse <code>Run on Server</code> 逾時導致專案起動失敗</p> <p><img src="/iforu/assets/img/dev-qna-01.6b6edebe.png" alt="dev-qna-01" title="dev-qna-01"></p></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/iforu/dev/office/" class="prev">
        辦公室相關
      </a></span> <span class="next"><a href="/iforu/dev/higate.html">
        Higate
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/iforu/assets/js/app.24cfdda6.js" defer></script><script src="/iforu/assets/js/2.c8a78117.js" defer></script><script src="/iforu/assets/js/7.fe9ac40b.js" defer></script>
  </body>
</html>
